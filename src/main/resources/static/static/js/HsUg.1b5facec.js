(window.webpackJsonp=window.webpackJsonp||[]).push([["HsUg"],{HsUg:function(e,t,l){"use strict";l.r(t);var i=l("t3Un");var a=l("7Qib"),o=l("glbJ"),s=l("P9Kg"),n={filters:{},components:{tinymce:o.a,editorImage:s.a},data:function(){return{tableKey:0,list:null,total:0,categoryAll:[{code:1,name:"是"},{code:0,name:"否"}],categoryStatus:[{code:1,name:"开启"},{code:0,name:"关闭"}],imgDialogFormVisible:!1,goodsAll:[],temp:{mainTitle:"",subTitle:"",titleDesc:"",keyWords:"",mainNotice:"",subNotice:"",copyRight:"",showStock:1,wbeStyle:"",bgImg:"",webUrl:"",webStatus:"",kmNotice:10},isDisabled:!0,rules:{webUrl:[{required:!0,message:"网站域名必填哦！",trigger:"blur"}]},allKms:0,cid:""}},created:function(){this.getConfig()},methods:{cancelForm:function(){this.temp={showStock:1}},save:function(){var e=this;""!==this.temp.webUrl&&null!==this.temp.webUrl||this.$message({type:"error",message:"网站域名必填哦！"}),this.$refs.dataForm.validate(function(t){t&&(delete e.temp.createDate,function(e){return Object(i.a)({url:"/api/webConfig/save",method:"post",data:e})}(e.temp).then(function(t){100===t.data.code?e.$notify({title:"成功",message:"更新成功",type:"success",duration:4e3}):e.$notify({title:"失败",message:t.data.msg,type:"error",duration:4e3})}))})},getConfig:function(){var e=this;Object(i.a)({url:"/api/webConfig/getAll",method:"post",params:null}).then(function(t){e.temp=t.data.data})},showImg:function(){this.imgDialogFormVisible=!0},imageSuccessCBK:function(e){e.length>0&&(this.temp.bgImg=e[0].url)},delBgimg:function(){var e=this;this.$confirm("确认删除首页背景图吗？").then(function(t){e.temp.bgImg=""})},formatJson:function(e,t){return t.map(function(t){return e.map(function(e){return"timestamp"===e?Object(a.e)(t[e]):t[e]})})}}},c=l("KHd+"),m=Object(c.a)(n,function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticClass:"app-container"},[l("el-form",{ref:"dataForm",staticStyle:{width:"60%"},attrs:{rules:e.rules,model:e.temp,"label-position":"left","label-width":"120px"}},[l("el-form-item",{attrs:{label:"网站域名",prop:"webUrl"}},[l("el-input",{model:{value:e.temp.webUrl,callback:function(t){e.$set(e.temp,"webUrl",t)},expression:"temp.webUrl"}},[l("template",{slot:"prepend"},[e._v("http://")]),l("template",{slot:"append"},[e._v("有端口请加上端口")])],2)],1),e._v(" "),l("el-form-item",{attrs:{label:"网站主标题"}},[l("el-input",{model:{value:e.temp.mainTitle,callback:function(t){e.$set(e.temp,"mainTitle",t)},expression:"temp.mainTitle"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"网站副标题"}},[l("el-input",{model:{value:e.temp.subTitle,callback:function(t){e.$set(e.temp,"subTitle",t)},expression:"temp.subTitle"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"网站描述"}},[l("el-input",{model:{value:e.temp.titleDesc,callback:function(t){e.$set(e.temp,"titleDesc",t)},expression:"temp.titleDesc"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"网站关键词"}},[l("el-input",{model:{value:e.temp.keyWords,callback:function(t){e.$set(e.temp,"keyWords",t)},expression:"temp.keyWords"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"主页公告"}},[l("tinymce",{model:{value:e.temp.mainNotice,callback:function(t){e.$set(e.temp,"mainNotice",t)},expression:"temp.mainNotice"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"查订单页面公告"}},[l("tinymce",{model:{value:e.temp.subNotice,callback:function(t){e.$set(e.temp,"subNotice",t)},expression:"temp.subNotice"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"底部版权"}},[l("el-input",{model:{value:e.temp.copyRight,callback:function(t){e.$set(e.temp,"copyRight",t)},expression:"temp.copyRight"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"首页背景图"}},[l("el-tag",{staticStyle:{float:"left","margin-top":"4px"}},[l("a",{staticStyle:{color:"#1e6abc"},attrs:{href:"javascript:void(0)"},on:{click:function(t){e.showImg()}}},[e._v("查看图片")])]),e._v(" "),l("editorImage",{staticClass:"editor-upload-btn",staticStyle:{float:"left","margin-left":"3px"},attrs:{"btn-text":"关闭",color:"#1890ff"},on:{successCBK:e.imageSuccessCBK}}),e._v(" "),l("el-alert",{attrs:{closable:!1,type:"warning",title:"首页背景图只可上传一张","show-icon":""}})],1),e._v(" "),l("el-form-item",{attrs:{label:"是否显示库存"}},[l("el-select",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{placeholder:"",clearable:""},model:{value:e.temp.showStock,callback:function(t){e.$set(e.temp,"showStock",t)},expression:"temp.showStock"}},e._l(e.categoryAll,function(e){return l("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})}))],1),e._v(" "),l("el-form-item",{attrs:{label:"库存警戒值"}},[l("el-input-number",{model:{value:e.temp.kmNotice,callback:function(t){e.$set(e.temp,"kmNotice",t)},expression:"temp.kmNotice"}}),e._v(" "),l("el-alert",{attrs:{closable:!1,type:"info",title:"库存低于警戒值时会发送邮件到超级管理员邮箱，0为不发送","show-icon":""}})],1),e._v(" "),l("el-form-item",{attrs:{label:"网站状态"}},[l("el-select",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{placeholder:"",clearable:""},model:{value:e.temp.webStatus,callback:function(t){e.$set(e.temp,"webStatus",t)},expression:"temp.webStatus"}},e._l(e.categoryStatus,function(e){return l("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})})),e._v(" "),l("el-alert",{attrs:{closable:!1,type:"info",title:"关闭后发卡首页将重定向到http://baidu.com","show-icon":""}})],1),e._v(" "),l("el-form-item",{attrs:{label:""}},[l("el-button",{on:{click:e.cancelForm}},[e._v("清空")]),e._v(" "),l("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存配置")])],1)],1),e._v(" "),l("el-dialog",{attrs:{visible:e.imgDialogFormVisible,"close-on-press-escape":!1,title:"查看图片"},on:{"update:visible":function(t){e.imgDialogFormVisible=t}}},[""!==e.temp.bgImg?l("el-row",[l("img",{attrs:{src:e.temp.bgImg,width:"100%",height:"50%"}})]):e._e(),e._v(" "),""===e.temp.bgImg?l("el-row",[l("span",[e._v("暂无图片")])]):e._e(),e._v(" "),l("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[""!==e.temp.bgImg?l("el-button",{staticClass:"el-button--primary",on:{click:e.delBgimg}},[e._v("删除")]):e._e(),e._v(" "),l("el-button",{on:{click:function(t){e.imgDialogFormVisible=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,null,null);m.options.__file="webconfig.vue";t.default=m.exports}}]);