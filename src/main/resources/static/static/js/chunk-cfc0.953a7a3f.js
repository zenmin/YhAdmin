(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-cfc0"],{"2BwM":function(t,e,i){},HsUg:function(t,e,i){"use strict";i.r(e);var n=i("t3Un");var l=i("7Qib"),a=i("glbJ"),s=i("P9Kg"),o={filters:{},components:{tinymce:a.a,editorImage:s.a},data:function(){return{tableKey:0,list:null,total:0,categoryAll:[{code:1,name:"是"},{code:0,name:"否"}],categoryStatus:[{code:1,name:"开启"},{code:0,name:"关闭"}],imgDialogFormVisible:!1,goodsAll:[],temp:{mainTitle:"",subTitle:"",titleDesc:"",keyWords:"",mainNotice:"",subNotice:"",copyRight:"",showStock:1,wbeStyle:"",bgImg:"",webUrl:"",webStatus:"",kmNotice:10},isDisabled:!0,rules:{webUrl:[{required:!0,message:"网站域名必填哦！",trigger:"blur"}]},allKms:0,cid:""}},created:function(){this.getConfig()},methods:{cancelForm:function(){this.temp={showStock:1}},save:function(){var t=this;this.$refs.dataForm.validate(function(e){e&&(delete t.temp.createDate,function(t){return Object(n.a)({url:"/api/webConfig/save",method:"post",data:t})}(t.temp).then(function(e){100===e.data.code?t.$notify({title:"成功",message:"更新成功",type:"success",duration:4e3}):t.$notify({title:"失败",message:e.data.msg,type:"error",duration:4e3})}))})},getConfig:function(){var t=this;Object(n.a)({url:"/api/webConfig/getAll",method:"post",params:null}).then(function(e){t.temp=e.data.data})},showImg:function(){this.imgDialogFormVisible=!0},imageSuccessCBK:function(t){t.length>0&&(this.temp.bgImg=t[0].url)},delBgimg:function(){var t=this;this.$confirm("确认删除首页背景图吗？").then(function(e){t.temp.bgImg=""})},formatJson:function(t,e){return e.map(function(e){return t.map(function(t){return"timestamp"===t?Object(l.e)(e[t]):e[t]})})}}},c=i("KHd+"),r=Object(c.a)(o,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"app-container"},[i("el-form",{ref:"dataForm",staticStyle:{width:"60%"},attrs:{rules:t.rules,model:t.temp,"label-position":"left","label-width":"120px"}},[i("el-form-item",{attrs:{label:"网站域名",prop:"webUrl"}},[i("el-input",{model:{value:t.temp.webUrl,callback:function(e){t.$set(t.temp,"webUrl",e)},expression:"temp.webUrl"}},[i("template",{slot:"prepend"},[t._v("http://")]),i("template",{slot:"append"},[t._v("有端口请加上端口")])],2)],1),t._v(" "),i("el-form-item",{attrs:{label:"网站主标题"}},[i("el-input",{model:{value:t.temp.mainTitle,callback:function(e){t.$set(t.temp,"mainTitle",e)},expression:"temp.mainTitle"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"网站副标题"}},[i("el-input",{model:{value:t.temp.subTitle,callback:function(e){t.$set(t.temp,"subTitle",e)},expression:"temp.subTitle"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"网站描述"}},[i("el-input",{model:{value:t.temp.titleDesc,callback:function(e){t.$set(t.temp,"titleDesc",e)},expression:"temp.titleDesc"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"网站关键词"}},[i("el-input",{model:{value:t.temp.keyWords,callback:function(e){t.$set(t.temp,"keyWords",e)},expression:"temp.keyWords"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"主页公告"}},[i("tinymce",{model:{value:t.temp.mainNotice,callback:function(e){t.$set(t.temp,"mainNotice",e)},expression:"temp.mainNotice"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"查订单页面公告"}},[i("tinymce",{model:{value:t.temp.subNotice,callback:function(e){t.$set(t.temp,"subNotice",e)},expression:"temp.subNotice"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"底部版权"}},[i("el-input",{model:{value:t.temp.copyRight,callback:function(e){t.$set(t.temp,"copyRight",e)},expression:"temp.copyRight"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"首页背景图"}},[i("el-tag",{staticStyle:{float:"left","margin-top":"4px"}},[i("a",{staticStyle:{color:"#1e6abc"},attrs:{href:"javascript:void(0)"},on:{click:function(e){t.showImg()}}},[t._v("查看图片")])]),t._v(" "),i("editorImage",{staticClass:"editor-upload-btn",staticStyle:{float:"left","margin-left":"3px"},attrs:{"btn-text":"关闭",color:"#1890ff"},on:{successCBK:t.imageSuccessCBK}}),t._v(" "),i("el-alert",{attrs:{closable:!1,type:"warning",title:"首页背景图只可上传一张","show-icon":""}})],1),t._v(" "),i("el-form-item",{attrs:{label:"是否显示库存"}},[i("el-select",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{placeholder:"",clearable:""},model:{value:t.temp.showStock,callback:function(e){t.$set(t.temp,"showStock",e)},expression:"temp.showStock"}},t._l(t.categoryAll,function(t){return i("el-option",{key:t.code,attrs:{label:t.name,value:t.code}})}))],1),t._v(" "),i("el-form-item",{attrs:{label:"库存警戒值"}},[i("el-input-number",{model:{value:t.temp.kmNotice,callback:function(e){t.$set(t.temp,"kmNotice",e)},expression:"temp.kmNotice"}}),t._v(" "),i("el-alert",{attrs:{closable:!1,type:"info",title:"库存低于警戒值时会发送邮件到超级管理员邮箱，0为不发送","show-icon":""}})],1),t._v(" "),i("el-form-item",{attrs:{label:"网站状态"}},[i("el-select",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{placeholder:"",clearable:""},model:{value:t.temp.webStatus,callback:function(e){t.$set(t.temp,"webStatus",e)},expression:"temp.webStatus"}},t._l(t.categoryStatus,function(t){return i("el-option",{key:t.code,attrs:{label:t.name,value:t.code}})})),t._v(" "),i("el-alert",{attrs:{closable:!1,type:"info",title:"关闭后发卡首页将重定向到http://baidu.com","show-icon":""}})],1),t._v(" "),i("el-form-item",{attrs:{label:""}},[i("el-button",{on:{click:t.cancelForm}},[t._v("清空")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:t.save}},[t._v("保存配置")])],1)],1),t._v(" "),i("el-dialog",{attrs:{visible:t.imgDialogFormVisible,"close-on-press-escape":!1,title:"查看图片"},on:{"update:visible":function(e){t.imgDialogFormVisible=e}}},[""!==t.temp.bgImg?i("el-row",[i("img",{attrs:{src:t.temp.bgImg,width:"100%",height:"50%"}})]):t._e(),t._v(" "),""===t.temp.bgImg?i("el-row",[i("span",[t._v("暂无图片")])]):t._e(),t._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[""!==t.temp.bgImg?i("el-button",{staticClass:"el-button--primary",on:{click:t.delBgimg}},[t._v("删除")]):t._e(),t._v(" "),i("el-button",{on:{click:function(e){t.imgDialogFormVisible=!1}}},[t._v("关闭")])],1)],1)],1)},[],!1,null,null,null);r.options.__file="webconfig.vue";e.default=r.exports},M5zG:function(t,e,i){"use strict";var n=i("2BwM");i.n(n).a},N44H:function(t,e,i){"use strict";var n=i("pqcF");i.n(n).a},P9Kg:function(t,e,i){"use strict";var n=i("4d7F"),l=i.n(n),a=i("GQeE"),s=i.n(a),o=i("X4fA"),c={name:"EditorSlideUpload",props:{color:{type:String,default:"#1890ff"}},data:function(){return{dialogVisible:!1,listObj:{},fileList:[],submitToken:{token:""}}},created:function(){this.submitToken.token=Object(o.a)()},methods:{checkAllSuccess:function(){var t=this;return s()(this.listObj).every(function(e){return t.listObj[e].hasSuccess})},handleSubmit:function(){var t=this,e=s()(this.listObj).map(function(e){return t.listObj[e]});this.checkAllSuccess()?(this.$emit("successCBK",e),this.listObj={},this.fileList=[],this.dialogVisible=!1):this.$message("请等待所有图片上传成功 或 出现了网络问题，请刷新页面重新上传！")},handleSuccess:function(t,e){for(var i=e.uid,n=s()(this.listObj),l=0,a=n.length;l<a;l++)if(this.listObj[n[l]].uid===i)return this.listObj[n[l]].url=t.data,void(this.listObj[n[l]].hasSuccess=!0)},handleRemove:function(t){for(var e=t.uid,i=s()(this.listObj),n=0,l=i.length;n<l;n++)if(this.listObj[i[n]].uid===e)return void delete this.listObj[i[n]]},beforeUpload:function(t){if(!(t.size>5242880)){var e=this,i=window.URL||window.webkitURL,n=t.uid;return this.listObj[n]={},new l.a(function(l,a){var s=new Image;s.src=i.createObjectURL(t),s.onload=function(){e.listObj[n]={hasSuccess:!1,uid:t.uid,width:this.width,height:this.height}},l(!0)})}this.$message({type:"error",message:"只能上传5M以下的图片！"})}}},r=(i("N44H"),i("KHd+")),u=Object(r.a)(c,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"upload-container"},[i("el-button",{style:{background:t.color,borderColor:t.color},attrs:{icon:"el-icon-upload",size:"mini",type:"primary"},on:{click:function(e){t.dialogVisible=!0}}},[t._v("上传图片")]),t._v(" "),i("el-dialog",{attrs:{visible:t.dialogVisible,modal:!1},on:{"update:visible":function(e){t.dialogVisible=e}}},[i("el-upload",{staticClass:"editor-slide-upload",attrs:{multiple:!0,"file-list":t.fileList,"show-file-list":!0,"on-remove":t.handleRemove,"on-success":t.handleSuccess,"before-upload":t.beforeUpload,headers:t.submitToken,action:"/api/upload/image","list-type":"picture-card"}},[i("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")])],1),t._v(" "),i("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:t.handleSubmit}},[t._v("确 定")])],1)],1)},[],!1,null,"bdc3c94a",null);u.options.__file="editorImage.vue";e.a=u.exports},glbJ:function(t,e,i){"use strict";var n=["advlist anchor autolink autosave code codesample colorpicker colorpicker contextmenu directionality emoticons fullscreen hr image imagetools insertdatetime link lists media nonbreaking noneditable pagebreak paste preview print save searchreplace spellchecker tabfocus table template textcolor textpattern visualblocks visualchars wordcount"],l=["searchreplace bold italic underline strikethrough alignleft aligncenter alignright outdent indent  blockquote undo redo removeformat subscript superscript code codesample","hr bullist numlist link image charmap preview anchor pagebreak insertdatetime media table emoticons forecolor backcolor fullscreen"],a={name:"Tinymce",components:{editorImage:i("P9Kg").a},props:{id:{type:String,default:function(){return"vue-tinymce-"+ +new Date+(1e3*Math.random()).toFixed(0)}},value:{type:String,default:""},toolbar:{type:Array,required:!1,default:function(){return[]}},menubar:{type:String,default:"file edit insert view format table"},height:{type:Number,required:!1,default:200}},data:function(){return{hasChange:!1,hasInit:!1,tinymceId:this.id,fullscreen:!1,languageTypeList:{en:"en",zh:"zh_CN"}}},computed:{language:function(){return this.languageTypeList[this.$store.getters.language]}},watch:{value:function(t){var e=this;!this.hasChange&&this.hasInit&&this.$nextTick(function(){return window.tinymce.get(e.tinymceId).setContent(t||"")})},language:function(){var t=this;this.destroyTinymce(),this.$nextTick(function(){return t.initTinymce()})}},mounted:function(){this.initTinymce()},activated:function(){this.initTinymce()},deactivated:function(){this.destroyTinymce()},destroyed:function(){this.destroyTinymce()},methods:{initTinymce:function(){var t=this,e=this;window.tinymce.init({language:this.language,selector:"#"+this.tinymceId,height:this.height,body_class:"panel-body ",object_resizing:!1,toolbar:this.toolbar.length>0?this.toolbar:l,menubar:this.menubar,plugins:n,end_container_on_empty_block:!0,powerpaste_word_import:"clean",code_dialog_height:450,code_dialog_width:1e3,advlist_bullet_styles:"square",advlist_number_styles:"default",imagetools_cors_hosts:["",""],default_link_target:"_blank",link_title:!1,nonbreaking_force_tab:!0,init_instance_callback:function(i){e.value&&i.setContent(e.value),e.hasInit=!0,i.on("NodeChange Change KeyUp SetContent",function(){t.hasChange=!0,t.$emit("input",i.getContent())})},setup:function(t){t.on("FullscreenStateChanged",function(t){e.fullscreen=t.state})}})},destroyTinymce:function(){var t=window.tinymce.get(this.tinymceId);this.fullscreen&&t.execCommand("mceFullScreen"),t&&t.destroy()},setContent:function(t){window.tinymce.get(this.tinymceId).setContent(t)},getContent:function(){window.tinymce.get(this.tinymceId).getContent()},imageSuccessCBK:function(t){var e=this;t.forEach(function(t){window.tinymce.get(e.tinymceId).insertContent('<img class="wscnph" src="'+t.url+'" >')})}}},s=(i("M5zG"),i("KHd+")),o=Object(s.a)(a,function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"tinymce-container editor-container",class:{fullscreen:this.fullscreen}},[e("textarea",{staticClass:"tinymce-textarea",attrs:{id:this.tinymceId}}),this._v(" "),e("div",{staticClass:"editor-custom-btn-container"},[e("editorImage",{staticClass:"editor-upload-btn",attrs:{color:"#1890ff"},on:{successCBK:this.imageSuccessCBK}})],1)])},[],!1,null,"345bd1a3",null);o.options.__file="index.vue";e.a=o.exports},pqcF:function(t,e,i){}}]);